function clippy(a){var b=a.luma<=.25?"CCCCCC":"1A1A1A";return'<div class="clippy"><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="110" height="14" id="clippy"><param name="movie" value="/palette/assets/flash/clippy.swf"><param name="allowScriptAccess" value="always"><param name="quality" value="high"><param name="scale" value="noscale"><param name="FlashVars" value="text='+a.hex+'"><param name="bgcolor" value="#'+b+'"><param name="wmode" value="opaque"><embed src="/palette/assets/flash/clippy.swf" width="110" height="14" name="clippy" quality="high" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" FlashVars="text='+a.hex+'" bgcolor="#'+b+'" wmode="opaque"></object></div>'}function hsv_to_object(a){var b=a.split(",");return{h:parseFloat(b[0]),s:parseFloat(b[1]),v:parseFloat(b[2])}}function hsv_to_string(a){return a.h.toString()+","+a.s.toString()+","+a.v.toString()}function resize(a){var b=parseInt(a,10);$.palette.hide(),$("#palette > div").css({width:a+"px",height:a+"px"}),$("#palette").css({width:(b*6).toString()+"px",height:(b*4).toString()+"px"})}$(document).ready(function(){var a=$("body"),b=!1,c=def=["0,0,0","0,0,4","0,0,8","0,0,12","0,0,16","0,0,20","0,0,44","0,0,40","0,0,36","0,0,32","0,0,28","0,0,24","0,0,48","0,0,52","0,0,56","0,0,60","0,0,64","0,0,68","0,0,92","0,0,88","0,0,84","0,0,80","0,0,76","0,0,72","120","false"];$.cookie("palette")?c=$.cookie("palette").split(";"):$.cookie("palette",c.join(";"),{expires:7}),c[c.length-1]=="true"&&a.addClass("light"),resize(c[c.length-2]),$("#palette > div").each(function(a){var b=$(this),d=parse_color(hsv_to_object(c[a]));b.html("<p/>"),b.palette({color:d.hsv,onChange:function(a){this.parent.children("p").html("#"+this.color.hex).toggleClass("light",this.color.luma<=.25),c[this.parent.index()]=hsv_to_string(this.color.hsv),$.cookie("palette",c.join(";"),{expires:7}),this.parent.children(".clippy").remove(),this.parent.append(clippy(this.color)),this.parent.toggleClass("light",this.color.luma<=.25),this.parent.css("background-color","#"+this.color.hex)},onLive:function(a){this.parent.css("background-color","#"+this.color.hex)}})}).mouseenter(function(){b=$(this)}).mouseleave(function(){b=!1}),$("#palette").sortable({cancel:".clippy",placeholder:"highlight",start:function(a,b){b.placeholder.css({width:$("#palette > div:first").css("width"),height:$("#palette > div:first").css("height")})},stop:function(a,b){$("#palette > div").each(function(a){c[a]=hsv_to_string($(this).data("palette").palette.data("palette").color.hsv)}),$.cookie("palette",c.join(";"),{expires:7})}}),$("#palette p").draggable({revert:!0}),$("#palette > div").droppable({tolerance:"fit",drop:function(a,b){$.palette.color($(this).data("palette").palette,b.draggable.text(),"drop")}}),$("#dark").mousedown(function(b){b.which>1||b.altKey||b.ctrlKey||b.metaKey||b.shiftKey||(b.preventDefault(),a.hasClass("light")&&(a.removeClass("light"),c[c.length-1]="false",$.cookie("palette",c.join(";"),{expires:7})))}),$("#light").mousedown(function(b){b.which>1||b.altKey||b.ctrlKey||b.metaKey||b.shiftKey||(b.preventDefault(),a.hasClass("light")||(a.addClass("light"),c[c.length-1]="true",$.cookie("palette",c.join(";"),{expires:7})))}),$("#smaller").mousedown(function(a){if(!(a.which>1||a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)){a.preventDefault();var b=$("#palette > div:first").width();b>100&&(b-=10,c[c.length-2]=b.toString(),resize(b),$.cookie("palette",c.join(";"),{expires:7}))}}),$("#larger").mousedown(function(a){if(!(a.which>1||a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)){a.preventDefault();var b=$("#palette > div:first").width();b<150&&(b+=10,c[c.length-2]=b.toString(),resize(b),$.cookie("palette",c.join(";"),{expires:7}))}}),$("#reset").mousedown(function(b){b.which>1||b.altKey||b.ctrlKey||b.metaKey||b.shiftKey||(b.preventDefault(),$.extend(c,def),a.hasClass("light")&&a.removeClass("light"),$("#palette > div").each(function(a){$.palette.color($(this).data("palette").palette,hsv_to_object(c[a]))}),resize(c[c.length-2]),$.cookie("palette",c.join(";"),{expires:7}))}),$("#colors").mousedown(function(a){a.which>1||a.altKey||a.ctrlKey||a.metaKey||a.shiftKey||(a.preventDefault(),$.extend(c,def.slice(0,-2)),$("#palette > div").each(function(a){$.palette.color($(this).data("palette").palette,hsv_to_object(c[a]))}),$.cookie("palette",c.join(";"),{expires:7}))}),$("#size").mousedown(function(a){if(!(a.which>1||a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)){a.preventDefault();var b=def.length-2;c[b]=def[b],resize(c[b]),$.cookie("palette",c.join(";"),{expires:7})}}),$(document).keydown(function(a){a.which==51&&a.shiftKey&&b&&(a.preventDefault(),b.trigger("click.palette"),b.data("palette").palette.find(".palette_hex input").focus().select())})})
